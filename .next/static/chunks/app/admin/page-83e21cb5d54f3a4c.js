(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1519:function(e,t,a){Promise.resolve().then(a.bind(a,3831))},3831:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ek}});var s=a(7437),n=a(2265),i=a(3053),r=a(7769),l=a(2208),o=a(5805),d=a(8124),c=a(2805),x=a(5929),u=a(7226),m=a(1281),p=a(6130),b=a(7416),g=a(4440),h=a(7692),f=a(2489),j=a(9397),v=a(8930),w=a(1671),N=a(6399),y=a(5690),k=a(5466),z=a(7586),_=a(5317),C=a(6215),S=a(2449),Z=a(3578),E=a(8728),P=a(8870),I=a(1723),T=a(1239);let q=e=>e||0===e?"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")):"00:00",O=e=>{let{start:t,duration:a,onFinish:i,small:r=!1}=e,[l,o]=(0,n.useState)(a);(0,n.useEffect)(()=>{if(!t)return;let e=setInterval(()=>{let e=new Date(t).getTime(),s=Math.max(0,a-Math.max(0,Math.floor((new Date().getTime()-e)/1e3)));o(s),0===s&&i&&i()},1e3);return()=>clearInterval(e)},[t,a,i]);let d=0===l;return r?(0,s.jsxs)("span",{className:"ml-1 text-[10px] px-2 py-0.5 rounded-full font-mono font-bold flex items-center gap-1 transition-colors ".concat(d?"bg-black/20 text-white/50":"bg-black/40 text-white"),children:[(0,s.jsx)(I.Z,{size:10}),Math.floor(l/60),":",(l%60).toString().padStart(2,"0")]}):(0,s.jsxs)("div",{className:"flex items-center gap-1 font-mono font-bold px-2 py-0.5 rounded-full text-xs transition-all duration-300 ".concat(d?"bg-gray-600 text-white shadow-sm":"bg-gray-500 text-white border border-gray-400/30"),children:[(0,s.jsx)(I.Z,{size:12,className:d?"":"animate-pulse"}),(0,s.jsx)("span",{className:"tabular-nums",children:d?"LISTO":q(l)})]})},R=e=>{let{metricas:t,base:a,isCompact:i,isDarkMode:r,currentTheme:l,toggleCocinando:o,entregar:d}=e,[c,x]=(0,n.useState)("with_orders"),u=t.filter(e=>{let t=e.totalPendientes>0,a=e.completas>0,s=e.cocinando;return"all"===c||("with_orders"===c?t||s||a:"pending"===c?t&&!s&&!a:"cooking"===c?s:"ready"!==c||a)}),m=e=>"px-3 py-1.5 rounded-full text-xs font-bold border whitespace-nowrap transition-colors ".concat(e?"".concat(l.color," text-white border-transparent shadow-md"):a.buttonSec),p=e=>{let t="pizza"===e.tipo;return{textReady:t?"EN HORNO":"PREPARANDO",textAction:t?"Al Horno":"Cocinar",color:t?"bg-red-600 border-red-600":"bg-orange-500 border-orange-500",icon:t?(0,s.jsx)(N.Z,{size:i?14:16,className:e.cocinando?"animate-bounce":""}):(0,s.jsx)(P.Z,{size:i?14:16,className:e.cocinando?"animate-pulse":""})}},b="flex-1 bg-transparent border font-bold rounded-xl flex items-center justify-center gap-1 py-3 active:scale-95 transition-colors \n        ".concat(r?"border-neutral-600 text-neutral-200 hover:bg-neutral-800 hover:text-white":"border-gray-300 text-gray-700 hover:bg-gray-100 hover:text-black"," text-[10px]");return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:[(0,s.jsx)("button",{onClick:()=>x("with_orders"),className:m("with_orders"===c),children:"Con Pedidos"}),(0,s.jsx)("button",{onClick:()=>x("all"),className:m("all"===c),children:"Todas"}),(0,s.jsx)("button",{onClick:()=>x("pending"),className:m("pending"===c),children:"En Espera"}),(0,s.jsx)("button",{onClick:()=>x("cooking"),className:m("cooking"===c),children:"Cocinando"}),(0,s.jsx)("button",{onClick:()=>x("ready"),className:m("ready"===c),children:"Listas"})]}),(0,s.jsx)("div",{className:"grid gap-3",children:0===u.length?(0,s.jsxs)("div",{className:"text-center py-10 opacity-50 ".concat(a.subtext),children:[(0,s.jsx)(_.Z,{size:40,className:"mx-auto mb-2 opacity-30"}),(0,s.jsx)("p",{children:"No hay items en esta categor\xeda"})]}):u.map(e=>{let t=[...e.pedidosPendientes||[]].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()).filter(e=>"entregado"!==e.estado).map(e=>e.invitado_nombre).join(", "),n=p(e);return(0,s.jsxs)("div",{className:"".concat(a.card," rounded-3xl border relative overflow-hidden transition-all ").concat(e.cocinando?"border-red-600/30 shadow-md":""," ").concat(i?"p-3":"p-5"),children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-3 relative z-10",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[(0,s.jsx)("h3",{className:"font-bold leading-tight ".concat(i?"text-base":"text-xl"),children:e.nombre}),e.cocinando&&(0,s.jsxs)("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-bold text-white whitespace-nowrap ".concat(n.color),children:[n.textReady," (",e.enHorno,")"]}),e.cocinando&&e.cocinando_inicio&&(0,s.jsx)("div",{className:"scale-90 origin-left",children:(0,s.jsx)(O,{start:e.cocinando_inicio,duration:e.tiempo_coccion||60})}),e.enEspera>0&&(0,s.jsxs)("span",{className:"text-[10px] text-white px-2 py-0.5 rounded-full font-bold whitespace-nowrap bg-gray-500",children:["EN ESPERA (",e.enEspera,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs opacity-70",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 font-mono",children:[(0,s.jsx)(I.Z,{size:12})," Tot. Pend: ",e.totalPendientes]}),(0,s.jsxs)("span",{className:"flex items-center gap-1 font-mono",children:["Stock: ",e.stockRestante]})]}),t&&(0,s.jsxs)("div",{className:"text-[10px] mt-2 opacity-80 leading-tight ".concat(a.text," font-medium ").concat(i?"overflow-x-auto whitespace-nowrap no-scrollbar pb-1":"whitespace-normal break-words"),children:[(0,s.jsx)("span",{className:"opacity-50 uppercase mr-1 sticky left-0 font-bold",children:"Piden:"}),t]})]})}),(0,s.jsxs)("div",{className:"relative ".concat(r?"bg-black":"bg-gray-300"," rounded-full overflow-hidden z-10 mb-4 ").concat(i?"h-1.5":"h-2.5"),children:[(0,s.jsx)("div",{className:"absolute inset-0 flex justify-between px-[1px] z-20",children:[...Array(e.target)].map((e,t)=>(0,s.jsx)("div",{className:"w-[1px] h-full ".concat(r?"bg-white/10":"bg-white/50")},t))}),(0,s.jsx)("div",{className:"absolute h-full ".concat(e.cocinando?n.color:l.color," transition-all duration-700"),style:{width:"".concat(e.percent,"%")}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[e.enEspera>0?(0,s.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>o(e,"una"),className:b,children:[n.icon," 1"]}),e.enEspera>1&&(0,s.jsxs)("button",{onClick:()=>o(e,"todas"),className:"flex-[1.5] ".concat(n.color," text-white text-[10px] font-bold rounded-xl flex items-center justify-center gap-1 py-3 shadow-lg active:scale-95"),children:[n.icon," \xa1Todos!"]})]}):(0,s.jsx)("div",{className:"flex-1 text-center text-[10px] py-3 opacity-40 font-bold border rounded-xl border-dashed ".concat(r?"border-neutral-700":"border-gray-300"),children:"Nada en espera"}),e.enHorno>0||e.enEspera>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-[1px] bg-gray-300 dark:bg-neutral-700 h-8 mx-1"}),(0,s.jsxs)("div",{className:"flex-[1.5] flex gap-2",children:[e.enHorno>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>d(e,"una",!1),className:b,children:[(0,s.jsx)(w.Z,{size:14})," ",(0,s.jsx)("span",{children:"1 Listo"})]}),e.enHorno>1&&(0,s.jsxs)("button",{onClick:()=>d(e,"todas",!1),className:"flex-1 ".concat(l.color," text-white text-[10px] font-bold rounded-xl flex flex-col leading-none items-center justify-center gap-1 py-2 shadow-lg active:scale-95"),children:[(0,s.jsx)(w.Z,{size:14})," ",(0,s.jsx)("span",{children:"Todos"})]})]}):(0,s.jsx)("div",{className:"flex-1"}),e.enEspera>0&&(0,s.jsx)("button",{onClick:()=>d(e,"una",!0),className:"w-8 bg-yellow-500 text-black font-bold rounded-xl flex items-center justify-center shadow-lg active:scale-95",title:"Entregar directo (Emergencia)",children:(0,s.jsx)(T.Z,{size:14})})]})]}):null]})]},e.id)})})]})},A=e=>{let{pedidosAgrupados:t,base:a,isDarkMode:n,eliminarPedidosGusto:i,resetAllOrders:r}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-3xl border flex items-center justify-between ".concat(a.card),children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Lista de Pedidos"}),(0,s.jsxs)("button",{onClick:r,className:"bg-red-500 text-white px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 shadow-lg active:scale-95",children:[(0,s.jsx)(v.Z,{size:16})," BORRAR TODO"]})]}),0===t.length?(0,s.jsx)("div",{className:"text-center py-20 opacity-50 ".concat(a.subtext),children:(0,s.jsx)("p",{children:"No hay pedidos pendientes"})}):(0,s.jsx)("div",{className:"grid gap-3",children:t.map(e=>(0,s.jsxs)("div",{className:"".concat(a.card," rounded-3xl p-4 border relative overflow-hidden"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg leading-none",children:e.nombre}),(0,s.jsxs)("p",{className:"text-[10px] mt-1 font-mono opacity-60",children:["Total: ",e.totalPendienteGeneral," items"]})]}),e.totalPendienteGeneral>0&&(0,s.jsx)("button",{onClick:()=>i(e.nombre),className:"text-red-500 p-2 hover:bg-red-500/10 rounded-full transition-colors",children:(0,s.jsx)(v.Z,{size:18})})]}),(0,s.jsx)("div",{className:"space-y-2",children:e.detalle.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm p-2 rounded-xl ".concat(n?"bg-neutral-800":"bg-gray-50"),children:[(0,s.jsx)("span",{className:"font-medium",children:e.nombre}),(0,s.jsxs)("div",{className:"flex gap-2 text-xs font-bold",children:[e.entregada>0&&(0,s.jsxs)("span",{className:"text-green-500",children:[e.entregada," OK"]}),e.enHorno>0&&(0,s.jsxs)("span",{className:"text-orange-500 flex items-center gap-1",children:[(0,s.jsx)(I.Z,{size:10})," ",e.enHorno]}),e.enEspera>0&&(0,s.jsxs)("span",{className:"opacity-50",children:[e.enEspera," Pend"]})]})]},e.id))})]},e.nombre))})]})};var D=a(8919),M=a(4794),L=a(3229),B=a(2207),H=a(2718),G=a(3388);let F=e=>{let{base:t,currentTheme:a,ingredients:i,newIngName:r,setNewIngName:l,newIngQty:o,setNewIngQty:d,newIngUnit:c,setNewIngUnit:x,newIngCat:u,setNewIngCat:m,addIng:p,editingIngId:b,editIngForm:g,setEditIngForm:h,saveEditIng:w,cancelEditIng:N,delIng:y,startEditIng:k,reservedState:z,quickUpdateStock:_}=e,[C,S]=(0,n.useState)("Todos"),[Z,E]=(0,n.useState)(!1),P=t.bg.includes("neutral-950")?"text-neutral-500 hover:bg-neutral-700 hover:text-white":"text-gray-400 hover:bg-gray-200 hover:text-black",I=(0,n.useMemo)(()=>{let e=new Set;return i.forEach(t=>{t.categoria&&e.add(t.categoria.trim())}),["Todos","General",...Array.from(e).filter(e=>"General"!==e).sort()]},[i]),T=(0,n.useMemo)(()=>"Todos"===C?i:i.filter(e=>(e.categoria||"General")===C),[i,C]),q=()=>{if(0===T.length)return"Lista vac\xeda";let e="*\uD83D\uDED2 Lista de Compras (".concat(C,")*\n\n");return T.forEach(t=>{e+="- ".concat(t.nombre,": ").concat(t.cantidad_disponible," ").concat(t.unidad,"\n")}),e},O=async()=>{let e=q();if(navigator.share)try{await navigator.share({title:"Lista de Compras - Vito App",text:e}),E(!1)}catch(e){console.log("Error sharing",e)}else alert("Tu dispositivo no soporta compartir nativo.")};return(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,s.jsx)("h2",{className:"text-xl font-bold opacity-80",children:"Inventario"}),(0,s.jsxs)("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold ".concat(a.color," text-white shadow-lg active:scale-95 transition-transform"),children:[(0,s.jsx)(D.Z,{size:16})," Compartir"]})]}),(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:I.map(e=>(0,s.jsx)("button",{onClick:()=>S(e),className:"px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all border ".concat(C===e?"".concat(a.color," text-white border-transparent shadow-md"):t.buttonSec),children:e},e))}),(0,s.jsxs)("div",{className:"p-4 rounded-3xl border ".concat(t.card," flex flex-col gap-3"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-50 uppercase text-[10px] font-bold tracking-wider",children:[(0,s.jsx)(M.Z,{size:12})," Nuevo Ingrediente"]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Nombre...",className:"flex-[2] p-3 rounded-xl outline-none border min-w-[120px] ".concat(t.input)}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Categor\xeda",list:"cat-list",className:"flex-1 p-3 rounded-xl outline-none border min-w-[100px] ".concat(t.input)}),(0,s.jsx)("datalist",{id:"cat-list",children:I.map(e=>(0,s.jsx)("option",{value:e},e))}),(0,s.jsx)("input",{type:"number",value:o,onChange:e=>d(e.target.value),placeholder:"0",className:"w-16 p-3 rounded-xl outline-none border text-center ".concat(t.input)}),(0,s.jsxs)("select",{value:c,onChange:e=>x(e.target.value),className:"w-20 p-3 rounded-xl outline-none border bg-transparent ".concat(t.input),children:[(0,s.jsx)("option",{value:"g",children:"g"}),(0,s.jsx)("option",{value:"kg",children:"kg"}),(0,s.jsx)("option",{value:"u",children:"u"}),(0,s.jsx)("option",{value:"ml",children:"ml"}),(0,s.jsx)("option",{value:"L",children:"L"})]}),(0,s.jsx)("button",{onClick:p,className:"w-12 rounded-xl font-bold flex items-center justify-center ".concat(a.color," text-white shadow-lg active:scale-95"),children:(0,s.jsx)(j.Z,{size:24})})]})]}),(0,s.jsx)("div",{className:"grid gap-3 grid-cols-2",children:T.map(e=>{let n=b===e.id,i=z[e.id]||0;return(0,s.jsx)("div",{className:"".concat(t.card," rounded-3xl border relative group overflow-hidden flex flex-col justify-between transition-shadow hover:shadow-md"),children:n?(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)("label",{className:"text-[10px] font-bold opacity-50 uppercase",children:"Editando"}),(0,s.jsx)("input",{type:"text",value:g.nombre,onChange:e=>h({...g,nombre:e.target.value}),className:"w-full p-2 rounded-lg border text-sm ".concat(t.input),placeholder:"Nombre"}),(0,s.jsx)("input",{type:"text",value:g.categoria,onChange:e=>h({...g,categoria:e.target.value}),className:"w-full p-2 rounded-lg border text-sm ".concat(t.input),placeholder:"Categor\xeda",list:"cat-list"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"number",value:g.cantidad,onChange:e=>h({...g,cantidad:e.target.value}),className:"w-full p-2 rounded-lg border text-sm ".concat(t.input)}),(0,s.jsxs)("select",{value:g.unidad,onChange:e=>h({...g,unidad:e.target.value}),className:"p-2 rounded-lg border text-sm bg-transparent ".concat(t.input),children:[(0,s.jsx)("option",{value:"g",children:"g"}),(0,s.jsx)("option",{value:"kg",children:"kg"}),(0,s.jsx)("option",{value:"u",children:"u"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,s.jsx)("button",{onClick:N,className:"flex-1 ".concat(t.buttonSec," border p-2 rounded-lg flex items-center justify-center"),children:(0,s.jsx)(f.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"flex-[2] ".concat(a.color," text-white p-2 rounded-lg flex items-center justify-center shadow"),children:(0,s.jsx)(L.Z,{size:16})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-4 pb-2 relative flex-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,s.jsxs)("div",{className:"min-w-0 pr-12",children:[(0,s.jsx)("h3",{className:"font-bold text-sm overflow-x-auto whitespace-nowrap no-scrollbar opacity-90",children:e.nombre}),(0,s.jsx)("p",{className:"text-[9px] opacity-50 uppercase font-bold",children:e.categoria||"General"})]}),(0,s.jsxs)("div",{className:"flex gap-1 opacity-30 group-hover:opacity-100 transition-opacity absolute right-2 top-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"hover:text-blue-500 transition-colors p-1",children:(0,s.jsx)(B.Z,{size:14})}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"hover:text-red-500 transition-colors p-1",children:(0,s.jsx)(v.Z,{size:14})})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1 mt-2",children:[(0,s.jsx)("span",{className:"text-xl font-black tracking-tight",children:e.cantidad_disponible}),(0,s.jsx)("span",{className:"text-xs font-bold opacity-40",children:e.unidad})]}),i>0&&(0,s.jsxs)("div",{className:"mt-2 text-[10px] text-orange-500 font-bold bg-orange-500/10 px-2 py-0.5 rounded-full inline-block",children:["Res: ",i.toFixed(1)," ",e.unidad]})]}),(0,s.jsx)("div",{className:"px-2 pb-2 pt-0",children:(0,s.jsx)("div",{className:"flex gap-1 justify-between",children:[1,5,10,100].map(t=>(0,s.jsxs)("button",{onClick:()=>_(e.id,e.cantidad_disponible,t),className:"flex-1 py-2 text-[10px] font-bold opacity-50 hover:opacity-100 rounded active:scale-95 transition-all ".concat(P),children:["+",t]},t))})})]})},e.id)})}),Z&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in p-4 pb-24 sm:pb-4",children:[(0,s.jsx)("div",{className:"absolute inset-0",onClick:()=>E(!1)}),(0,s.jsxs)("div",{className:"".concat(t.card," w-full max-w-sm rounded-[32px] p-6 shadow-2xl relative border z-10 animate-in slide-in-from-bottom-10 duration-300"),children:[(0,s.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-700 rounded-full mx-auto mb-6 opacity-50"}),(0,s.jsx)("button",{onClick:()=>E(!1),className:"absolute top-6 right-6 opacity-50 hover:opacity-100 p-1",children:(0,s.jsx)(f.Z,{size:20})}),(0,s.jsx)("h3",{className:"text-xl font-bold mb-1 text-center",children:"Compartir Lista"}),(0,s.jsxs)("p",{className:"text-sm opacity-60 mb-6 text-center",children:["Enviando lista de: ",(0,s.jsx)("b",{children:C})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:()=>{let e=q(),t="https://wa.me/?text=".concat(encodeURIComponent(e));window.open(t,"_blank"),E(!1)},className:"w-full py-4 rounded-2xl flex items-center justify-center gap-3 font-bold bg-[#25D366] text-white shadow-lg active:scale-95 transition-transform hover:brightness-110",children:[(0,s.jsx)(H.Z,{size:24})," Enviar por WhatsApp"]}),(0,s.jsxs)("button",{onClick:O,className:"w-full py-4 rounded-2xl flex items-center justify-center gap-3 font-bold border ".concat(t.buttonSec," active:scale-95 transition-transform"),children:[(0,s.jsx)(G.Z,{size:24})," Otras Aplicaciones"]})]})]})]})]})};var U=a(933),K=a(1094),V=a(3305),W=a(8553),J=a(3113),Q=a(8156),X=a(2135),Y=a(875),$=a(3618);let ee=e=>{let{value:t,onChange:a,isDarkMode:n}=e,i=Math.floor(t/60),r=t%60,l=(e,t)=>{let s=i,n=r;"m"===e&&(s=Math.max(0,s+t)),"s"===e&&((n+=t)>=60&&(n-=60,s++),n<0&&(s>0?(n+=60,s--):n=0)),a(60*s+n)},o=n?"hover:bg-white/10 active:bg-white/20 text-white":"hover:bg-black/10 active:bg-black/20 text-black";return(0,s.jsx)("div",{className:"flex flex-col items-center w-full",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("button",{onClick:()=>l("m",1),className:"".concat(o," p-0.5 rounded"),children:(0,s.jsx)(X.Z,{size:12})}),(0,s.jsx)("span",{className:"text-sm font-mono font-bold leading-none",children:i.toString().padStart(2,"0")}),(0,s.jsx)("button",{onClick:()=>l("m",-1),className:"".concat(o," p-0.5 rounded"),children:(0,s.jsx)(Y.Z,{size:12})})]}),(0,s.jsx)("span",{className:"pb-1",children:":"}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("button",{onClick:()=>l("s",10),className:"".concat(o," p-0.5 rounded"),children:(0,s.jsx)(X.Z,{size:12})}),(0,s.jsx)("span",{className:"text-sm font-mono font-bold leading-none",children:r.toString().padStart(2,"0")}),(0,s.jsx)("button",{onClick:()=>l("s",-10),className:"".concat(o," p-0.5 rounded"),children:(0,s.jsx)(Y.Z,{size:12})})]})]})})},et=e=>{let{className:t="w-6 h-6",strokeWidth:a=2}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,s.jsx)("path",{d:"M3 15h18"}),(0,s.jsx)("path",{d:"M3 11h18"}),(0,s.jsx)("path",{d:"M5.5 8.5c.5-2.5 2.5-4.5 6.5-4.5s6 2 6.5 4.5"}),(0,s.jsx)("path",{d:"M6 19a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3"})]})},ea=e=>{let{base:t,config:a,setConfig:i,activeCategories:o,uniqueCategories:d,toggleCategory:c,currentTheme:x,addP:u,uploading:m,newPizzaName:p,setNewPizzaName:b,isDarkMode:g,handleImageUpload:h,newPizzaImg:w,newPizzaDesc:N,setNewPizzaDesc:y,newPizzaIngredients:k,removeFromNewPizzaRecipe:z,newPizzaSelectedIng:_,setNewPizzaSelectedIng:C,ingredients:S,newPizzaRecipeQty:Z,setNewPizzaRecipeQty:E,addToNewPizzaRecipe:P,newPizzaCat:I,setNewPizzaCat:T,newPizzaPortions:q,setNewPizzaPortions:O,stockEstimadoNueva:R,newPizzaTime:A,setNewPizzaTime:D,pizzas:M,edits:B,recetas:H,updateP:G,savePizzaChanges:F,cancelChanges:ea,delP:es,tempRecipeIng:en,setTempRecipeIng:ei,tempRecipeQty:er,setTempRecipeQty:el,addToExistingPizza:eo,removeFromExistingPizza:ed,reservedState:ec,calcularStockDinamico:ex,updateLocalRecipe:eu,newPizzaType:em,setNewPizzaType:ep}=e,[eb,eg]=(0,n.useState)({}),eh=e=>{eg(t=>({...t,[e]:!t[e]}))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"".concat(t.card," p-5 rounded-3xl border flex flex-col gap-3 shadow-sm"),children:[(0,s.jsx)("label",{className:"text-xs font-bold uppercase tracking-wider opacity-60 ".concat(t.subtext),children:"CATEGORIAS A MOSTRAR:"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{onClick:async()=>{let e=o.includes("Todas");i({...a,categoria_activa:JSON.stringify(e?["General"]:["Todas"])})},className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold border transition-all ".concat(o.includes("Todas")?"bg-neutral-800 text-white border-neutral-700":"bg-neutral-100 dark:bg-white/5 border-transparent text-gray-500"),children:[o.includes("Todas")?(0,s.jsx)(U.Z,{size:14}):(0,s.jsx)(K.Z,{size:14})," Todas"]}),d.map(e=>{let t=o.includes(e);return(0,s.jsxs)("button",{onClick:()=>c(e),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold border transition-all ".concat(t?"bg-neutral-800 text-white border-neutral-700":"bg-neutral-100 dark:bg-white/5 border-transparent text-gray-500"),children:[t?(0,s.jsx)(U.Z,{size:14}):(0,s.jsx)(K.Z,{size:14})," ",e]},e)})]})]}),(0,s.jsxs)("div",{className:"p-5 rounded-3xl border shadow-sm relative overflow-hidden group ".concat(t.card),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("h3",{className:"font-bold flex items-center gap-2 text-xl ".concat(t.subtext),children:[(0,s.jsx)(j.Z,{size:24})," Nuevo Item"]}),(0,s.jsxs)("div",{className:"flex bg-neutral-100 dark:bg-black/30 rounded-xl p-1 border border-neutral-200 dark:border-white/10",children:[(0,s.jsx)("button",{onClick:()=>{ep("pizza"),O(4),T("Pizzas")},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("pizza"===em?"bg-white dark:bg-neutral-800 shadow text-black dark:text-white":"text-gray-400 hover:text-gray-600"),children:(0,s.jsx)(V.Z,{size:14})}),(0,s.jsx)("button",{onClick:()=>{ep("burger"),O(1),T("Hamburguesas")},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("burger"===em?"bg-white dark:bg-neutral-800 shadow text-black dark:text-white":"text-gray-400 hover:text-gray-600"),children:(0,s.jsx)(et,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{ep("other"),O(1),T("")},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("other"===em?"bg-white dark:bg-neutral-800 shadow text-black dark:text-white":"text-gray-400 hover:text-gray-600"),children:(0,s.jsx)(W.Z,{size:14})})]}),(0,s.jsx)("button",{onClick:u,disabled:m,className:"".concat(x.color," text-white font-bold px-6 py-2 rounded-xl shadow-lg active:scale-95 transition-all text-sm"),children:"CREAR"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("input",{className:"w-full text-2xl font-bold bg-transparent outline-none placeholder-opacity-30 ".concat(g?"placeholder-white":"placeholder-black"),placeholder:"Nombre del plato...",value:p,onChange:e=>b(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex-shrink-0 cursor-pointer w-24 h-24 rounded-2xl overflow-hidden border-2 border-dashed ".concat(t.uploadBox," flex items-center justify-center transition-colors group relative"),children:[w?(0,s.jsx)("img",{src:w,className:"w-full h-full object-cover"}):(0,s.jsx)(J.Z,{size:24,className:"opacity-30"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-white",children:(0,s.jsx)(Q.Z,{size:20})}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>h(e),disabled:m})]}),(0,s.jsx)("textarea",{className:"flex-1 p-0 bg-transparent text-sm leading-relaxed outline-none resize-none h-24 placeholder-opacity-40 ".concat(g?"placeholder-white":"placeholder-black"),placeholder:"Descripci\xf3n...",value:N,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl"),children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:k.map((e,t)=>(0,s.jsxs)("span",{className:"text-xs bg-white shadow-sm dark:bg-white/10 px-3 py-1.5 rounded-lg flex items-center gap-2 font-bold text-black dark:text-white",children:[e.nombre," ",(0,s.jsx)("span",{className:"opacity-50 text-[10px]",children:e.cantidad})," ",(0,s.jsx)("button",{onClick:()=>z(t),children:(0,s.jsx)(f.Z,{size:12})})]},t))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{className:"flex-1 w-0 min-w-0 p-2 text-sm rounded-xl font-bold outline-none bg-white dark:bg-black/20 text-black dark:text-white",value:_,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"+ Ingrediente"}),S.map(e=>(0,s.jsxs)("option",{value:"".concat(e.id,"|").concat(e.nombre),children:[e.nombre," (Disp: ",e.cantidad_disponible,")"]},e.id))]}),(0,s.jsx)("input",{type:"number",className:"w-14 p-2 text-sm rounded-xl text-center font-bold outline-none bg-white dark:bg-black/20 text-black dark:text-white",value:Z,onChange:e=>E(Number(e.target.value)||""),placeholder:"Cant"}),(0,s.jsx)("button",{onClick:P,className:"bg-neutral-800 dark:bg-white text-white dark:text-black px-4 rounded-xl text-sm font-bold shadow-sm flex-shrink-0",children:"OK"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-2",children:[(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl flex flex-col items-center justify-center text-center"),children:[(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Categoria"}),(0,s.jsx)("input",{list:"categories",className:"w-full text-center font-bold bg-transparent outline-none text-sm",value:I,onChange:e=>T(e.target.value),placeholder:"other"===em?"Ej: Bebidas":""}),(0,s.jsx)("datalist",{id:"categories",children:d.map(e=>(0,s.jsx)("option",{value:e},e))})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl flex flex-col items-center justify-center text-center ").concat("burger"===em?"opacity-50":""),children:[(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Porciones"}),(0,s.jsx)("input",{type:"number",disabled:"burger"===em,className:"w-full text-center font-bold bg-transparent outline-none text-sm",value:q,onChange:e=>O(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl flex flex-col items-center justify-center text-center"),children:[(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Stock Est."}),(0,s.jsx)("span",{className:"text-xl font-bold",children:R})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl flex flex-col items-center justify-center text-center"),children:[(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Timer"}),(0,s.jsx)(ee,{value:A,onChange:D,isDarkMode:g})]})]})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:M.map(e=>{var a;let n=!!B[e.id],i=eb[e.id],o={...e,...B[e.id]},d=(null===(a=B[e.id])||void 0===a?void 0:a.local_recipe)?B[e.id].local_recipe:H.filter(t=>t.pizza_id===e.id).map(e=>{var t;return{...e,nombre:(null===(t=S.find(t=>t.id===e.ingrediente_id))||void 0===t?void 0:t.nombre)||"?"}}),c=ex(d,S),u=o.tipo||"pizza";return(0,s.jsxs)("div",{className:"p-4 rounded-3xl border flex flex-col relative overflow-hidden transition-all ".concat(t.card," ").concat(n?"border-yellow-500/50":""),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 mr-2",children:[(0,s.jsx)("button",{onClick:()=>eh(e.id),className:"p-1.5 rounded-lg ".concat(t.buttonSec),children:i?(0,s.jsx)(X.Z,{size:18}):(0,s.jsx)(Y.Z,{size:18})}),"burger"===u?(0,s.jsx)(et,{className:"text-orange-500 w-5 h-5 flex-shrink-0"}):"other"===u?(0,s.jsx)(W.Z,{size:20,className:"text-blue-500 flex-shrink-0"}):(0,s.jsx)(V.Z,{size:20,className:"text-red-500 flex-shrink-0"}),(0,s.jsx)("input",{value:o.nombre,onChange:t=>G(e.id,"nombre",t.target.value),className:"bg-transparent font-bold text-lg outline-none w-full border-b border-transparent focus:border-white/20 pb-1 truncate"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-shrink-0",children:[n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>F(e.id),className:"p-2 ".concat(x.color," text-white rounded-xl animate-pulse shadow-lg hover:scale-105 transition-transform"),title:"Guardar",children:(0,s.jsx)(L.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>ea(e.id),className:"p-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 rounded-xl shadow-sm hover:scale-105 transition-transform",title:"Cancelar",children:(0,s.jsx)(f.Z,{size:16})})]}),!n&&(0,s.jsx)("button",{onClick:()=>G(e.id,"activa",!e.activa),className:"p-2 rounded-xl transition-colors ".concat(e.activa?"bg-white/10 hover:bg-white/20":"bg-black/50 text-neutral-500"),children:e.activa?(0,s.jsx)(l.Z,{size:16}):(0,s.jsx)(r.Z,{size:16})}),!n&&(0,s.jsx)("button",{onClick:()=>es(e.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors",children:(0,s.jsx)(v.Z,{size:16})})]})]}),i&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 mt-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"cursor-pointer relative w-20 h-20 rounded-xl overflow-hidden bg-neutral-900 group flex-shrink-0 shadow-inner",children:[o.imagen_url?(0,s.jsx)("img",{src:o.imagen_url,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-neutral-600",children:(0,s.jsx)(J.Z,{size:20})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-white",children:(0,s.jsx)(Q.Z,{size:16})}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>h(t,e.id)})]}),(0,s.jsx)("textarea",{value:o.descripcion||"",onChange:t=>G(e.id,"descripcion",t.target.value),className:"flex-1 p-0 bg-transparent text-sm leading-relaxed outline-none resize-none h-20 opacity-80 placeholder-opacity-30 ".concat(g?"placeholder-white":"placeholder-black"),placeholder:"Descripci\xf3n..."})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-3 rounded-2xl"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase opacity-50 tracking-wider",children:"Receta"}),(0,s.jsxs)("span",{className:"text-[10px] font-bold bg-black/20 px-2 py-0.5 rounded-full",children:[d.length," Ingredientes"]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:d.map((t,a)=>(0,s.jsxs)("span",{className:"text-xs bg-white dark:bg-white/10 px-2 py-1 rounded-lg flex items-center gap-1 border border-black/5 dark:border-white/5 font-medium text-black dark:text-white",children:[t.nombre,": ",t.cantidad_requerida,(0,s.jsx)("button",{onClick:()=>ed(e.id,a,d),className:"text-red-400 hover:text-red-300 ml-1",children:(0,s.jsx)(f.Z,{size:12})})]},a))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{className:"flex-1 w-0 min-w-0 p-1.5 text-xs rounded-lg font-bold outline-none bg-white dark:bg-black/20 text-black dark:text-white",value:en[e.id]||"",onChange:t=>ei({...en,[e.id]:t.target.value}),children:[(0,s.jsx)("option",{value:"",children:"+ Ingrediente"}),S.map(e=>(0,s.jsxs)("option",{value:"".concat(e.id,"|").concat(e.nombre),children:[e.nombre," (Disp: ",Math.max(0,e.cantidad_disponible-(ec[e.id]||0)),")"]},e.id))]}),(0,s.jsx)("input",{type:"number",placeholder:"Cant",className:"w-12 p-1.5 text-xs rounded-lg text-center font-bold outline-none bg-white dark:bg-black/20 text-black dark:text-white",value:er[e.id]||"",onChange:t=>el({...er,[e.id]:Number(t.target.value)||""})}),(0,s.jsx)("button",{onClick:()=>{if(!en[e.id])return;let[t,a]=en[e.id].split("|");eo(e.id,t,a,er[e.id]||0,d),ei({...en,[e.id]:""}),el({...er,[e.id]:""})},className:"bg-neutral-800 dark:bg-white text-white dark:text-black px-3 rounded-lg text-xs font-bold flex-shrink-0",children:"OK"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-2 rounded-2xl flex flex-col items-center justify-center text-center"),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Tipo & Cat."}),(0,s.jsxs)("div",{className:"flex gap-1 bg-black/10 dark:bg-white/5 p-1 rounded-lg mb-1",children:[(0,s.jsx)("button",{onClick:()=>{G(e.id,"tipo","pizza"),G(e.id,"categoria","Pizzas"),G(e.id,"porciones_individuales",4)},className:"p-1.5 rounded-md transition-all ".concat("pizza"===u?"bg-white dark:bg-neutral-700 text-red-500 shadow":"text-gray-400 hover:text-gray-500"),title:"Pizza",children:(0,s.jsx)(V.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>{G(e.id,"tipo","burger"),G(e.id,"categoria","Hamburguesas"),G(e.id,"porciones_individuales",1)},className:"p-1.5 rounded-md transition-all ".concat("burger"===u?"bg-white dark:bg-neutral-700 text-orange-500 shadow":"text-gray-400 hover:text-gray-500"),title:"Burger",children:(0,s.jsx)(et,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{G(e.id,"tipo","other")},className:"p-1.5 rounded-md transition-all ".concat("other"===u?"bg-white dark:bg-neutral-700 text-blue-500 shadow":"text-gray-400 hover:text-gray-500"),title:"Otro",children:(0,s.jsx)(W.Z,{size:16})})]}),(0,s.jsx)("input",{list:"categories",value:o.categoria||"",onChange:t=>G(e.id,"categoria",t.target.value),className:"w-full text-center bg-transparent outline-none text-[10px] font-bold opacity-80",placeholder:"Categor\xeda..."})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-2 rounded-2xl flex flex-col items-center justify-center text-center ").concat("burger"===u?"opacity-50":""),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Porciones"}),(0,s.jsx)("input",{type:"number",disabled:"burger"===u,value:o.porciones_individuales||"",onChange:t=>G(e.id,"porciones_individuales",t.target.value?parseInt(t.target.value):null),className:"w-full text-center bg-transparent outline-none text-sm font-bold"})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-2 rounded-2xl flex flex-col items-center justify-center relative overflow-hidden text-center"),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Stock"}),d.length>0?(0,s.jsxs)("div",{className:"flex items-center gap-1 font-bold text-xl",children:[(0,s.jsx)($.Z,{size:14,className:"opacity-30"})," ",c]}):(0,s.jsx)("input",{type:"number",value:o.stock||0,onChange:t=>G(e.id,"stock",parseInt(t.target.value)),className:"w-full text-center bg-transparent outline-none text-sm font-bold"})]}),(0,s.jsxs)("div",{className:"".concat(t.innerCard," p-2 rounded-2xl flex flex-col items-center justify-center text-center"),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider mb-1",children:"Timer"}),(0,s.jsx)(ee,{value:o.tiempo_coccion||60,onChange:t=>G(e.id,"tiempo_coccion",t),isDarkMode:g})]})]})]})]},e.id)})})]})};var es=a(6595),en=a(9076);let ei=e=>{let{base:t,delAllVal:a,ranking:n,delValPizza:i}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-6 rounded-3xl ".concat(t.card," mb-6 shadow-sm flex justify-between items-center"),children:[(0,s.jsx)("h3",{className:"font-bold uppercase tracking-widest text-sm ".concat(t.textHead),children:"Ranking & Feedback"}),(0,s.jsx)("button",{onClick:a,className:"text-[10px] bg-red-900/30 text-red-500 px-3 py-1 rounded-full border border-red-900/50 hover:bg-red-900/50 transition-colors",children:"RESET ALL"})]}),(0,s.jsx)("div",{className:"grid gap-3",children:n.map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-2xl border flex justify-between items-center ".concat(t.card),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-center w-12",children:[(0,s.jsxs)("div",{className:"text-xl font-bold text-yellow-500 flex justify-center items-center gap-0.5",children:[e.avg," ",(0,s.jsx)(es.Z,{size:12,fill:"currentColor"})]}),(0,s.jsxs)("div",{className:"text-[9px] ".concat(t.subtext),children:[e.count," votes"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-sm",children:e.nombre}),(0,s.jsxs)("div",{className:"text-[10px] ".concat(t.subtext),children:[e.totalOrders," porciones"]})]})]}),(0,s.jsx)("button",{onClick:()=>i(e.id),className:"p-2 text-neutral-500 hover:text-red-500 transition-colors",title:"Reset item",children:(0,s.jsx)(en.Z,{size:16})})]},e.id))})]})};var er=a(6337),el=a(9589),eo=a(8906);let ed=e=>{let{base:t,newGuestName:a,setNewGuestName:n,addU:i,allUsersList:r,resetU:l,toggleB:o,eliminarUsuario:d,tempMotivos:c,setTempMotivos:x,guardarMotivo:u,currentTheme:m,resetAllOrders:p}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-4 rounded-3xl border ".concat(t.card),children:[(0,s.jsx)("h3",{className:"text-sm font-bold mb-3 uppercase opacity-70",children:"Nuevo Invitado"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Nombre...",className:"flex-1 min-w-0 p-3 rounded-xl outline-none border ".concat(t.input)}),(0,s.jsx)("button",{onClick:i,className:"w-12 h-12 flex-shrink-0 rounded-xl font-bold flex items-center justify-center ".concat(m.color," text-white shadow-lg active:scale-95"),children:(0,s.jsx)(j.Z,{size:24})})]})]}),(0,s.jsx)("div",{className:"grid gap-3",children:r.map(e=>(0,s.jsxs)("div",{className:"".concat(t.card," rounded-2xl p-3 border flex items-center gap-3 ").concat(e.bloqueado?t.blocked:""),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center font-bold text-white ".concat(e.bloqueado?"bg-red-500":"bg-gray-400"),children:e.nombre.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-bold truncate",children:e.nombre}),"web"===e.origen&&(0,s.jsx)("span",{className:"text-[8px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded-full font-bold flex-shrink-0",children:"WEB"}),e.bloqueado&&(0,s.jsx)("span",{className:"text-[8px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-bold flex-shrink-0",children:"BLOQ"})]}),(0,s.jsx)("p",{className:"text-[10px] opacity-50 flex items-center gap-1",children:e.totalOrders>0?"".concat(e.totalOrders," pedidos"):"Sin pedidos"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,s.jsx)("button",{onClick:()=>o(e),className:"p-2 rounded-lg ".concat(e.bloqueado?"bg-red-500 text-white":t.buttonSec),children:e.bloqueado?(0,s.jsx)(er.Z,{size:14}):(0,s.jsx)(el.Z,{size:14})}),e.bloqueado&&(0,s.jsx)("input",{type:"text",placeholder:"Motivo...",defaultValue:e.motivo_bloqueo||"",onBlur:t=>{let a=t.target.value;x({...c,[e.nombre]:a}),u(e.nombre,e)},className:"w-20 text-[10px] p-1 border rounded bg-white text-black"})]}),(0,s.jsx)("button",{onClick:()=>l(e.nombre),className:"p-2 rounded-lg text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",children:(0,s.jsx)(en.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>d(e.nombre,e),className:"p-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:(0,s.jsx)(v.Z,{size:16})})]})]},e.nombre))}),(0,s.jsxs)("div",{className:"p-4 rounded-3xl border border-red-500/30 bg-red-500/5 mt-8",children:[(0,s.jsxs)("h3",{className:"text-red-500 font-bold text-xs uppercase mb-2 flex items-center gap-2",children:[(0,s.jsx)(eo.Z,{size:14})," Zona de Peligro"]}),(0,s.jsxs)("button",{onClick:p,className:"w-full py-3 bg-red-500 text-white font-bold rounded-xl shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[(0,s.jsx)(v.Z,{size:18})," BORRAR TODOS LOS PEDIDOS"]}),(0,s.jsx)("p",{className:"text-[10px] text-red-400 text-center mt-2 opacity-70",children:"Esto eliminar\xe1 el historial de pedidos de todos los usuarios."})]})]})};var ec=a(6748);let ex=(0,i.eI)("https://cutlcftpuiceogkkprtk.supabase.co","sb_publishable_zKg1ud99ikKeNNaLWb-sKw_hFkt9y3n"),eu=e=>{let{base:t,config:a,setConfig:n,isDarkMode:i,resetAllOrders:r,newPass:l,setNewPass:d,confirmPass:c,setConfirmPass:x,changePass:u,currentTheme:m,sessionDuration:p,setSessionDuration:b}=e,g=e=>{if(b(e),localStorage.getItem("vito-admin-session")){let t=Date.now()+e;localStorage.setItem("vito-admin-session",JSON.stringify({expiry:t}))}};return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in pb-20",children:[(0,s.jsxs)("div",{className:"p-5 rounded-3xl border ".concat(t.card),children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[(0,s.jsx)(G.Z,{size:20})," Mensaje de Bienvenida"]}),(0,s.jsx)("p",{className:"text-xs mb-3 ".concat(t.subtext),children:"Usa [nombre], [fecha], [hora], [pizzas] como variables."}),(0,s.jsx)("textarea",{className:"w-full p-4 rounded-xl border outline-none min-h-[100px] text-sm ".concat(t.input),value:a.mensaje_bienvenida||"",onChange:e=>n({...a,mensaje_bienvenida:e.target.value}),placeholder:"Ej: Hola [nombre], hoy hay [pizzas] variedades..."}),(0,s.jsx)("button",{onClick:async()=>{await ex.from("configuracion_dia").update({mensaje_bienvenida:a.mensaje_bienvenida}).eq("id",a.id),alert("Mensaje guardado")},className:"mt-3 w-full py-3 rounded-xl font-bold text-sm ".concat(m.color," text-white shadow-lg"),children:"GUARDAR MENSAJE"})]}),(0,s.jsxs)("div",{className:"p-5 rounded-3xl border ".concat(t.card),children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{size:20})," Acceso Invitados"]}),(0,s.jsx)("p",{className:"text-xs mb-3 ".concat(t.subtext),children:"Si dejas esto vac\xedo, cualquiera podr\xe1 entrar sin clave."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center px-4 rounded-xl border ".concat(t.input),children:[(0,s.jsx)(ec.Z,{size:18,className:t.subtext}),(0,s.jsx)("input",{type:"text",className:"w-full bg-transparent outline-none p-3 ml-2",value:a.password_invitados||"",onChange:e=>n({...a,password_invitados:e.target.value}),placeholder:"Sin contrase\xf1a..."})]}),(0,s.jsx)("button",{onClick:async()=>{await ex.from("configuracion_dia").update({password_invitados:a.password_invitados}).eq("id",a.id),alert("Contrase\xf1a de invitados actualizada")},className:"px-6 rounded-xl font-bold text-sm ".concat(m.color," text-white shadow-lg"),children:(0,s.jsx)(L.Z,{size:20})})]})]}),(0,s.jsxs)("div",{className:"p-5 rounded-3xl border ".concat(t.card),children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,s.jsx)(er.Z,{size:20})," Seguridad Admin"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"text-xs font-bold uppercase tracking-wider block mb-2 ".concat(t.subtext),children:"Mantener sesi\xf3n abierta por:"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{label:"1 Hora",value:36e5},{label:"8 Horas",value:288e5},{label:"24 Horas",value:864e5},{label:"3 D\xedas",value:2592e5},{label:"1 Semana",value:6048e5},{label:"30 D\xedas",value:2592e6}].map(e=>(0,s.jsx)("button",{onClick:()=>g(e.value),className:"py-2 px-1 rounded-xl text-xs font-bold border transition-all ".concat(p===e.value?"".concat(m.color," text-white border-transparent"):"".concat(t.buttonSec)),children:e.label},e.label))})]}),(0,s.jsx)("div",{className:"h-[1px] w-full ".concat(t.divider," my-4")}),(0,s.jsx)("label",{className:"text-xs font-bold uppercase tracking-wider block mb-2 ".concat(t.subtext),children:"Cambiar Contrase\xf1a Admin"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{type:"password",value:l,onChange:e=>d(e.target.value),className:"w-full p-3 rounded-xl border outline-none ".concat(t.input),placeholder:"Nueva contrase\xf1a"}),(0,s.jsx)("input",{type:"password",value:c,onChange:e=>x(e.target.value),className:"w-full p-3 rounded-xl border outline-none ".concat(t.input),placeholder:"Confirmar contrase\xf1a"}),(0,s.jsx)("button",{onClick:u,disabled:!l||l!==c,className:"w-full py-3 rounded-xl font-bold text-sm transition-all ".concat(l&&l===c?"bg-black dark:bg-white text-white dark:text-black":"bg-gray-200 dark:bg-gray-800 text-gray-400"),children:"ACTUALIZAR PASS"})]})]}),(0,s.jsxs)("div",{className:"p-5 rounded-3xl border border-red-500/20 bg-red-500/5",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4 text-red-500 flex items-center gap-2",children:[(0,s.jsx)(v.Z,{size:20})," Zona de Peligro"]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-bold text-sm ".concat(t.text),children:"Resetear Pedidos"}),(0,s.jsx)("p",{className:"text-[10px] ".concat(t.subtext),children:"Borra todos los pedidos pero mantiene el men\xfa."})]}),(0,s.jsx)("button",{onClick:r,className:"bg-red-500 text-white p-2 rounded-xl",children:(0,s.jsx)(en.Z,{size:20})})]})]})]})};var em=a(7168),ep=a(9897),eb=a(401),eg=a(8893),eh=a(9202),ef=a(3774);let ej=e=>{let{base:t,logs:a,isDarkMode:i,currentTheme:r,updateLogName:l,onRefresh:o}=e,[d,c]=(0,n.useState)(null),[x,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),b=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}),g=e=>{c(e.id),u(e.invitado_nombre||"")},h=()=>{c(null),u("")},j=e=>{l(e,x),c(null)},v=async()=>{o&&(p(!0),await o(),setTimeout(()=>p(!1),800))};return(0,s.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,s.jsxs)("div",{className:"p-4 rounded-3xl border ".concat(t.card," flex justify-between items-center"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl ".concat(r.color," text-white shadow-lg"),children:(0,s.jsx)(Z.Z,{size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold leading-none",children:"Registro de Accesos"}),(0,s.jsxs)("p",{className:"text-xs ".concat(t.subtext," mt-1"),children:["Total visitas hoy: ",a.length]})]})]}),(0,s.jsx)("button",{onClick:v,className:"p-3 rounded-xl border transition-all active:scale-95 ".concat(t.buttonSec," ").concat(m?"animate-spin":""),title:"Actualizar lista",children:(0,s.jsx)(em.Z,{size:20})})]}),(0,s.jsx)("div",{className:"space-y-2",children:0===a.length?(0,s.jsx)("div",{className:"text-center py-10 opacity-50 ".concat(t.subtext),children:"No hay registros a\xfan..."}):a.map(e=>{var a,n,i;return(0,s.jsxs)("div",{className:"p-4 rounded-2xl border flex flex-col gap-2 relative overflow-hidden ".concat(t.card," ").concat(e.invitado_nombre?"":"opacity-70"),children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 ".concat(e.invitado_nombre?"bg-green-500":"bg-gray-300")}),(0,s.jsxs)("div",{className:"flex justify-between items-start pl-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(null===(a=e.device)||void 0===a?void 0:a.toLowerCase().includes("mobile"))||(null===(n=e.device)||void 0===n?void 0:n.toLowerCase().includes("iphone"))||(null===(i=e.device)||void 0===i?void 0:i.toLowerCase().includes("android"))?(0,s.jsx)(G.Z,{size:18,className:"text-blue-500 flex-shrink-0"}):(0,s.jsx)(ep.Z,{size:18,className:"text-purple-500 flex-shrink-0"}),d===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-1 w-full max-w-[200px]",children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),className:"text-sm px-2 py-1 rounded border outline-none w-full ".concat(t.input),placeholder:"Nombre...",autoFocus:!0}),(0,s.jsx)("button",{onClick:()=>j(e.id),className:"p-1 text-green-500 hover:bg-green-500/10 rounded",children:(0,s.jsx)(eb.Z,{size:14})}),(0,s.jsx)("button",{onClick:h,className:"p-1 text-red-500 hover:bg-red-500/10 rounded",children:(0,s.jsx)(f.Z,{size:14})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,s.jsx)("span",{className:"font-bold text-sm ".concat(e.invitado_nombre?t.text:t.subtext),children:e.invitado_nombre||"Visitante An\xf3nimo"}),(0,s.jsx)("button",{onClick:()=>g(e),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded ".concat(t.subtext),children:(0,s.jsx)(eg.Z,{size:10})}),e.is_manual_edit&&(0,s.jsx)("span",{className:"text-[9px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-bold",children:"EDITADO"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-[10px] font-mono opacity-60 ml-2 whitespace-nowrap",children:[(0,s.jsx)(I.Z,{size:10})," ",b(e.created_at)]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 pl-2 mt-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] ".concat(t.subtext),children:[(0,s.jsx)(eh.Z,{size:12})," ",e.ip||"IP Oculta"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] ".concat(t.subtext),children:[(0,s.jsx)(ef.Z,{size:12})," ",e.ciudad?"".concat(e.ciudad,", ").concat(e.pais):"Ubicaci\xf3n desc."]}),(0,s.jsxs)("div",{className:"col-span-2 text-[10px] opacity-50 truncate font-mono bg-black/5 dark:bg-white/5 p-1 rounded",children:[e.device," - ",e.browser]})]})]},e.id)})})]})},ev=(0,i.eI)("https://cutlcftpuiceogkkprtk.supabase.co","sb_publishable_zKg1ud99ikKeNNaLWb-sKw_hFkt9y3n"),ew=async e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=e=>{var s;let n=new Image;n.src=null===(s=e.target)||void 0===s?void 0:s.result,n.onload=()=>{let e=document.createElement("canvas"),s=n.width,i=n.height;s>i?s>1600&&(i*=1600/s,s=1600):i>1600&&(s*=1600/i,i=1600),e.width=s,e.height=i;let r=e.getContext("2d");null==r||r.drawImage(n,0,0,s,i),e.toBlob(e=>{e?t(e):a(Error("Canvas error"))},"image/jpeg",.8)}},s.onerror=e=>a(e)}),eN=(e,t)=>{if(!e||0===e.length)return 0;let a=1/0;return e.forEach(e=>{let s=t.find(t=>t.id===e.ingrediente_id);if(s){let t=Number(e.cantidad||e.cantidad_requerida||0);if(t>0){let e=Math.floor(s.cantidad_disponible/t);e<a&&(a=e)}}else a=0}),a===1/0?0:a},ey=[{name:"Carbone",color:"bg-neutral-600",gradient:"from-neutral-700 to-neutral-900",text:"text-neutral-400"},{name:"Turquesa",color:"bg-cyan-600",gradient:"from-cyan-600 to-teal-900",text:"text-cyan-400"},{name:"Pistacho",color:"bg-lime-600",gradient:"from-lime-600 to-green-900",text:"text-lime-400"},{name:"Fuego",color:"bg-red-600",gradient:"from-red-600 to-rose-900",text:"text-red-500"},{name:"Violeta",color:"bg-violet-600",gradient:"from-violet-600 to-purple-900",text:"text-violet-400"},{name:"Insta",color:"bg-pink-600",gradient:"from-purple-600 via-pink-600 to-orange-500",text:"text-pink-500"},{name:"Aurora",color:"bg-indigo-600",gradient:"from-blue-500 via-indigo-500 to-purple-500",text:"text-indigo-400"},{name:"Sunset",color:"bg-orange-500",gradient:"from-rose-500 via-orange-500 to-yellow-500",text:"text-orange-500"},{name:"Oceanic",color:"bg-cyan-600",gradient:"from-cyan-500 via-blue-600 to-indigo-600",text:"text-cyan-500"},{name:"Berry",color:"bg-fuchsia-600",gradient:"from-fuchsia-600 via-purple-600 to-pink-600",text:"text-fuchsia-500"}];function ek(){let[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(""),[P,I]=(0,n.useState)(!1),[T,q]=(0,n.useState)("cocina"),[O,D]=(0,n.useState)(864e5),[M,L]=(0,n.useState)([]),[B,H]=(0,n.useState)([]),[G,U]=(0,n.useState)([]),[K,V]=(0,n.useState)([]),[W,J]=(0,n.useState)({}),[Q,X]=(0,n.useState)([]),[Y,$]=(0,n.useState)({}),[ee,et]=(0,n.useState)([]),[es,en]=(0,n.useState)([]),[er,el]=(0,n.useState)({porciones_por_pizza:4,total_invitados:10,password_invitados:"",categoria_activa:'["General"]',mensaje_bienvenida:"",tiempo_recordatorio_minutos:10}),[eo,ec]=(0,n.useState)(0),[ex,em]=(0,n.useState)(0),[ep,eb]=(0,n.useState)([]),[eg,eh]=(0,n.useState)(!1),ef=(0,n.useRef)(0),[ek,ez]=(0,n.useState)(""),[e_,eC]=(0,n.useState)(""),[eS,eZ]=(0,n.useState)(""),[eE,eP]=(0,n.useState)(90),[eI,eT]=(0,n.useState)(""),[eq,eO]=(0,n.useState)(4),[eR,eA]=(0,n.useState)("pizza"),[eD,eM]=(0,n.useState)(!1),[eL,eB]=(0,n.useState)([]),[eH,eG]=(0,n.useState)(""),[eF,eU]=(0,n.useState)(""),[eK,eV]=(0,n.useState)(!1),[eW,eJ]=(0,n.useState)("SET"),[eQ,eX]=(0,n.useState)(""),[eY,e$]=(0,n.useState)(""),[e0,e1]=(0,n.useState)([]),[e2,e5]=(0,n.useState)(""),[e3,e4]=(0,n.useState)(""),[e6,e9]=(0,n.useState)("g"),[e8,e7]=(0,n.useState)("General"),[te,tt]=(0,n.useState)(null),[ta,ts]=(0,n.useState)({nombre:"",cantidad:0,unidad:"g",categoria:"General"}),[tn,ti]=(0,n.useState)({}),[tr,tl]=(0,n.useState)({}),[to,td]=(0,n.useState)(""),[tc,tx]=(0,n.useState)(""),[tu,tm]=(0,n.useState)(""),[tp,tb]=(0,n.useState)({}),[tg,th]=(0,n.useState)(ey[0]),[tf,tj]=(0,n.useState)(!1),[tv,tw]=(0,n.useState)("estado"),[tN,ty]=(0,n.useState)(!1),[tk,tz]=(0,n.useState)(!0),t_=tk?{bg:"bg-neutral-950 text-white",card:"bg-neutral-900 border-neutral-800",input:"bg-black border-neutral-700 text-white placeholder-neutral-600",header:"bg-neutral-900/90 border-neutral-800",subtext:"text-neutral-500",textHead:"text-neutral-300",buttonSec:"bg-neutral-800 text-neutral-400 hover:text-white border-white/10",buttonIcon:"bg-neutral-800 text-neutral-400 hover:text-white",divider:"border-neutral-800",metric:"bg-neutral-900 border-neutral-800",blocked:"bg-red-900/10 border-red-900/30",bar:"bg-neutral-900/50 backdrop-blur-md border-white/10 shadow-lg text-white border",innerCard:"bg-neutral-800 border-neutral-700 text-white",uploadBox:"bg-neutral-800 border-neutral-600 hover:bg-neutral-700"}:{bg:"bg-gray-100 text-gray-900",card:"bg-white border-gray-200 shadow-sm",input:"bg-white border-gray-300 text-gray-900 placeholder-gray-400",header:"bg-white/90 border-gray-200",subtext:"text-gray-500",textHead:"text-gray-800",buttonSec:"bg-white text-gray-600 hover:text-black border-gray-300",buttonIcon:"bg-gray-200 text-gray-600 hover:text-black",divider:"border-gray-200",metric:"bg-white border-gray-200 shadow-sm",blocked:"bg-red-50 border-red-200",bar:"bg-white/50 backdrop-blur-md border-gray-300 shadow-lg text-gray-900 border",innerCard:"bg-neutral-100 border-neutral-200 text-gray-900",uploadBox:"bg-neutral-100 border-neutral-300 hover:bg-neutral-200"};(0,n.useEffect)(()=>{let e=localStorage.getItem("vito-admin-session");if(e)try{let a=JSON.parse(e);Date.now()<a.expiry?t(!0):localStorage.removeItem("vito-admin-session")}catch(e){localStorage.removeItem("vito-admin-session")}},[]),(0,n.useEffect)(()=>{if(e){tD();let e=ev.channel("admin-realtime").on("postgres_changes",{event:"*",schema:"public"},()=>tD()).subscribe();return()=>{ev.removeChannel(e)}}},[e]),(0,n.useEffect)(()=>{e&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(e=>{e.update(),Notification.requestPermission()}).catch(e=>console.log("Admin SW failed",e))},[e]),(0,n.useEffect)(()=>{if(!e)return;let t=ev.channel("online-users",{config:{presence:{key:"admin"}}});return t.on("presence",{event:"sync"},()=>{let e=Object.values(t.presenceState()).flat().filter(e=>"guest"===e.role);em(e.length),eb(e.map(e=>e.name||"Invitado sin nombre").filter(e=>e))}).subscribe(async e=>{"SUBSCRIBED"===e&&await t.track({online_at:new Date().toISOString(),role:"admin"})}),()=>{ev.removeChannel(t)}},[e]);let tC=(0,n.useMemo)(()=>eN(eL,G),[eL,G]),tS=(0,n.useMemo)(()=>{try{let e=JSON.parse(er.categoria_activa);if("Todas"===e||Array.isArray(e)&&0===e.length)return[];return Array.isArray(e)?e:["General"]}catch(e){return["General"]}},[er.categoria_activa]),tZ=(0,n.useMemo)(()=>{let e=new Set;return B.forEach(t=>{t.categoria&&e.add(t.categoria.trim())}),Array.from(e).sort()},[B]),tE=e=>{th(e),localStorage.setItem("vito-theme",e.name),tj(!1),window.dispatchEvent(new Event("storage"))},tP=async e=>{e&&e.preventDefault();let{data:s}=await ev.from("configuracion_dia").select("*").single();if(!s){let{data:e}=await ev.from("configuracion_dia").insert([{password_admin:"admin"}]).select().single();s=e}if(s&&s.password_admin===a){t(!0),el(s);let e=Date.now()+O;localStorage.setItem("vito-admin-session",JSON.stringify({expiry:e})),tD()}else alert("Incorrecto")},tI=async()=>{let{data:e}=await ev.from("access_logs").select("*").order("created_at",{ascending:!1}).limit(100);e&&X(e)},tT=async(e,t)=>{if("serviceWorker"in navigator&&navigator.serviceWorker.ready)try{(await navigator.serviceWorker.ready).showNotification(e,{body:t,icon:"/icon.png"});return}catch(e){}"granted"===Notification.permission&&new Notification(e,{body:t,icon:"/icon.png"})},tq=(e,t,a)=>{$(s=>({...s,[e]:{...s[e],[t]:a}}))},tO=(e,t)=>{tq(e,"local_recipe",t)},tR=async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){eM(!0);try{let e=await ew(s),t="".concat(Date.now(),".jpg"),{error:n}=await ev.storage.from("pizzas").upload(t,new File([e],s.name,{type:"image/jpeg"}));if(n)throw n;let{data:i}=ev.storage.from("pizzas").getPublicUrl(t);a?tq(a,"imagen_url",i.publicUrl):eZ(i.publicUrl)}catch(e){alert("Error: "+e.message)}finally{eM(!1)}}},tA=async()=>{let e=new Date;6>e.getHours()&&e.setDate(e.getDate()-1),e.setHours(6,0,0,0);let t=e.toISOString(),[{data:a},{data:s},{data:n},{data:i},{data:r}]=await Promise.all([ev.from("recetas").select("*"),ev.from("ingredientes").select("*"),ev.from("menu_pizzas").select("*"),ev.from("pedidos").select("*").neq("estado","entregado").gte("created_at",t),ev.from("configuracion_dia").select("*").single()]);if(!a||!s||!n||!i||!r)return;let l=r.porciones_por_pizza||8,o={};i.forEach(e=>{let t=n.find(t=>t.id===e.pizza_id),s=(null==t?void 0:t.porciones_individuales)||l,i=e.cantidad_porciones/s;a.filter(t=>t.pizza_id===e.pizza_id).forEach(e=>{let t=e.cantidad_requerida*i;o[e.ingrediente_id]=(o[e.ingrediente_id]||0)+t})}),J(o);let d=n.map(async e=>{let t=a.filter(t=>t.pizza_id===e.id),n=999;if(t.length>0){let e=1/0;t.forEach(t=>{let a=s.find(e=>e.id===t.ingrediente_id);if(a){let s=a.cantidad_disponible||0,n=o[a.id]||0,i=t.cantidad_requerida>0?Math.floor(Math.max(0,s-n)/t.cantidad_requerida):999;i<e&&(e=i)}else e=0}),n=e===1/0?0:e}else n=0;e.stock!==n&&await ev.from("menu_pizzas").update({stock:n}).eq("id",e.id)});await Promise.all(d);let{data:c}=await ev.from("menu_pizzas").select("*").order("created_at",{ascending:!0});c&&H(c)},tD=async()=>{let e=new Date;6>e.getHours()&&e.setDate(e.getDate()-1),e.setHours(6,0,0,0);let t=e.toISOString(),[a,s,n,i,r,l,o,d]=await Promise.all([ev.from("menu_pizzas").select("*").order("created_at",{ascending:!0}),ev.from("ingredientes").select("*").order("nombre"),ev.from("recetas").select("*"),ev.from("pedidos").select("*").gte("created_at",t).order("created_at",{ascending:!0}),ev.from("lista_invitados").select("*").order("nombre"),ev.from("configuracion_dia").select("*").single(),ev.from("valoraciones").select("*").gte("created_at",t).order("created_at",{ascending:!1}),ev.from("access_logs").select("*").order("created_at",{ascending:!1}).limit(100)]);a.data&&H(a.data),s.data&&U(s.data),n.data&&V(n.data),i.data&&(L(i.data),ec(new Set(i.data.map(e=>e.invitado_nombre.toLowerCase())).size),ef.current>0&&i.data.length>ef.current&&tT("\xa1Nuevos Pedidos!","Han entrado ".concat(i.data.length-ef.current," pedidos nuevos.")),ef.current=i.data.length),r.data&&et(r.data),l.data&&el(l.data),o.data&&en(o.data),d.data&&X(d.data),a.data&&s.data&&n.data&&i.data&&tA()},tM=async(e,t)=>{let a=M.filter(a=>a.invitado_nombre===e&&a.pizza_id===t),s=a.find(e=>"pendiente"===e.estado);if(s||(s=a.find(e=>"cocinando"===e.estado)),s||(s=a.find(e=>"entregado"===e.estado)),s){if(!confirm("\xbfEliminar 1 unidad (".concat(s.estado,") de ").concat(e,"?")))return;if(confirm("\xbfDevolver los ingredientes al Inventario?")){let e=B.find(e=>e.id===t),a=(null==e?void 0:e.porciones_individuales)||er.porciones_por_pizza||1,n=K.filter(e=>e.pizza_id===t);if(n.length>0){let e=s.cantidad_porciones/a,t=n.map(async t=>{let a=G.find(e=>e.id===t.ingrediente_id);if(a){let s=t.cantidad_requerida*e;await ev.from("ingredientes").update({cantidad_disponible:a.cantidad_disponible+s}).eq("id",a.id)}});await Promise.all(t),alert("Ingredientes devueltos.")}}await ev.from("pedidos").delete().eq("id",s.id),L(e=>e.filter(e=>e.id!==s.id)),tD(),await tA()}else alert("No se encontraron pedidos de este usuario para esta comida.")},tL=async e=>{if(confirm('\xbfDuplicar "'.concat(e.nombre,'"? \nSe copiar\xe1 la informaci\xf3n y la receta.')))try{let{data:t,error:a}=await ev.from("menu_pizzas").insert([{nombre:"".concat(e.nombre," (Copia)"),descripcion:e.descripcion,imagen_url:e.imagen_url,tiempo_coccion:e.tiempo_coccion,categoria:e.categoria,porciones_individuales:e.porciones_individuales,tipo:e.tipo,stock:0,activa:!1}]).select().single();if(a||!t)throw Error("Error creando la pizza copia");let s=K.filter(t=>t.pizza_id===e.id);if(s.length>0){let e=s.map(e=>({pizza_id:t.id,ingrediente_id:e.ingrediente_id,cantidad_requerida:e.cantidad_requerida}));await ev.from("recetas").insert(e)}alert("\xa1Duplicada con \xe9xito! La copia est\xe1 inactiva."),tD()}catch(e){alert("Error al duplicar: "+e.message)}},tB=async(e,t,a)=>{"activa"===t?(await ev.from("menu_pizzas").update({activa:a}).eq("id",e),H(t=>t.map(t=>t.id===e?{...t,activa:a}:t))):tq(e,t,a)},tH=async()=>{if(!ek)return;let{data:e}=await ev.from("menu_pizzas").insert([{nombre:ek,descripcion:e_,stock:0,imagen_url:eS,tiempo_coccion:eE,categoria:eI,activa:!0,porciones_individuales:eq,tipo:eR}]).select().single();if(e&&eL.length>0){let t=eL.map(t=>({pizza_id:e.id,ingrediente_id:t.ingrediente_id,cantidad_requerida:t.cantidad}));await ev.from("recetas").insert(t)}ez(""),eC(""),eZ(""),eB([]),await tA()},tG=async e=>{if(!confirm("\xbfEst\xe1s seguro?"))return;await ev.from("recetas").delete().eq("pizza_id",e);let{error:t}=await ev.from("menu_pizzas").delete().eq("id",e);t?confirm(" Tiene historial. \xbfBorrar TODO?")&&(await ev.from("pedidos").delete().eq("pizza_id",e),await ev.from("valoraciones").delete().eq("pizza_id",e),await ev.from("menu_pizzas").delete().eq("id",e),tD()):tD()},tF=async()=>{tc&&(await ev.from("configuracion_dia").update({password_admin:tc}).eq("id",er.id),alert("OK"),tx(""))},tU=async e=>{let t=new Set(tS);t.has(e)?t.delete(e):t.add(e);let a=Array.from(t);el({...er,categoria_activa:JSON.stringify(a)}),await ev.from("configuracion_dia").update({categoria_activa:JSON.stringify(a)}).eq("id",er.id)},tK=async()=>{if(!to)return;let{error:e}=await ev.from("lista_invitados").insert([{nombre:to}]);e?alert("Error"):(td(""),tD())},tV=async e=>{let t=e.id;if(!t){let{data:a}=await ev.from("lista_invitados").insert([{nombre:e.nombre}]).select().single();if(!a)return;t=a.id}await ev.from("lista_invitados").update({bloqueado:!e.bloqueado}).eq("id",t),tD()},tW=async(e,t)=>{let a=tp[e];if(void 0===a)return;let s=null==t?void 0:t.id;if(s)await ev.from("lista_invitados").update({motivo_bloqueo:a}).eq("id",s);else{let{data:t,error:s}=await ev.from("lista_invitados").insert([{nombre:e,motivo_bloqueo:a,bloqueado:!0}]).select().single();if(s||!t){alert("Error");return}}alert("OK"),tD()},tJ=async()=>{let e=prompt('Escribe "BORRAR TODO"');if((null==e?void 0:e.toUpperCase())!=="BORRAR TODO")return;let{error:t}=await ev.from("pedidos").delete().neq("id","00000000-0000-0000-0000-000000000000");t||(await ev.from("menu_pizzas").update({cocinando:!1,cocinando_inicio:null}).neq("id","00000000-0000-0000-0000-000000000000"),alert("OK"),tD())},tQ=async()=>{if(!e2)return;let e=""===e3?0:Number(e3),t=G.find(e=>e.nombre.toLowerCase()===e2.toLowerCase());t?await ev.from("ingredientes").update({cantidad_disponible:t.cantidad_disponible+e}).eq("id",t.id):await ev.from("ingredientes").insert([{nombre:e2,cantidad_disponible:e,unidad:e6,categoria:e8}]),e5(""),e4(""),await tA(),tD()},tX=async e=>{let t=Number(ta.cantidad);await ev.from("ingredientes").update({nombre:ta.nombre,cantidad_disponible:t,unidad:ta.unidad,categoria:ta.categoria}).eq("id",e),tt(null),await tA(),tD()},tY=async e=>{confirm("\xbfBorrar?")&&await ev.from("ingredientes").delete().eq("id",e),await tA(),tD()},t$=async(e,t,a)=>{await ev.from("ingredientes").update({cantidad_disponible:t+a}).eq("id",e),await tA(),tD()},t0=async e=>{let t=Y[e];if(!t)return;let{local_recipe:a,...s}=t;if(Object.keys(s).length>0&&await ev.from("menu_pizzas").update(s).eq("id",e),a&&(await ev.from("recetas").delete().eq("pizza_id",e),a.length>0)){let t=a.map(t=>({pizza_id:e,ingrediente_id:t.ingrediente_id,cantidad_requerida:t.cantidad_requerida}));await ev.from("recetas").insert(t)}await tD(),await tA(),$(t=>{let a={...t};return delete a[e],a})},t1=async e=>{let t=e.trim(),{data:a}=await ev.from("lista_invitados").select("id").ilike("nombre",t).maybeSingle();a||await ev.from("lista_invitados").insert([{nombre:t,origen:"web"}])},t2=async(e,t)=>{if(!confirm("\xbfBorrar pendientes?"))return;await t1(e);let a=M.filter(a=>a.invitado_nombre.toLowerCase()===e.toLowerCase()&&a.pizza_id===t&&"pendiente"===a.estado).map(e=>e.id);a.length&&await ev.from("pedidos").delete().in("id",a),tD()},t5=async e=>{if(!confirm("\xbfBorrar pedidos de ".concat(e,"?")))return;await t1(e);let t=M.filter(t=>t.invitado_nombre.toLowerCase()===e.toLowerCase()).map(e=>e.id);t.length&&await ev.from("pedidos").delete().in("id",t),tD()},t3=async(e,t)=>{confirm("\xbfELIMINAR a ".concat(e,"?"))&&(await ev.from("pedidos").delete().eq("invitado_nombre",e),(null==t?void 0:t.id)?await ev.from("lista_invitados").delete().eq("id",t.id):await ev.from("lista_invitados").delete().ilike("nombre",e),tD())},t4=async()=>{if(!eQ||0===e0.length){alert("Selecciona ingrediente y al menos una pizza.");return}if("SET"===eW&&0>=Number(eY)){alert("Ingresa una cantidad v\xe1lida.");return}if(confirm("\xbf".concat("REMOVE"===eW?"ELIMINAR ingrediente de":"Aplicar cambios a"," ").concat(e0.length," items?")))try{if("REMOVE"===eW){for(let e of e0)await ev.from("recetas").delete().eq("pizza_id",e).eq("ingrediente_id",eQ);alert("\xa1Ingrediente eliminado de la selecci\xf3n!")}else{for(let e of e0){let{data:t}=await ev.from("recetas").select("*").eq("pizza_id",e).eq("ingrediente_id",eQ).single();t?await ev.from("recetas").update({cantidad_requerida:Number(eY)}).eq("id",t.id):await ev.from("recetas").insert([{pizza_id:e,ingrediente_id:eQ,cantidad_requerida:Number(eY)}])}alert("\xa1Aplicado correctamente!")}eV(!1),e1([]),e$(""),eX(""),await tD(),await tA()}catch(e){alert("Error aplicando cambios masivos: "+e.message)}},t6=e=>{e1(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},t9=async(e,t)=>{await ev.from("access_logs").update({invitado_nombre:t,is_manual_edit:!0}).eq("id",e),tI()},t8=async()=>{if("BORRAR"===prompt("BORRAR")){let{data:e}=await ev.from("valoraciones").select("id"),t=(null==e?void 0:e.map(e=>e.id))||[];t.length&&await ev.from("valoraciones").delete().in("id",t),tD()}},t7=async e=>{confirm("\xbfBorrar todas?")&&(await ev.from("valoraciones").delete().eq("pizza_id",e),tD())},ae=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"todas",a=e.pedidosPendientes.filter(e=>"pendiente"===e.estado);if(0===a.length)return;let s=e.porciones_individuales||er.porciones_por_pizza||4,n=a.reduce((e,t)=>e+t.cantidad_porciones,0);if("una"===t&&n<s){alert("Faltan porciones");return}let i=0;if("una"===t)i=1;else if(0===(i=Math.floor(n/s))){alert("No completas unidad.");return}let r=i*s,l=[],o=[];for(let e of[...a].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())){if(r<=0)break;if(e.cantidad_porciones<=r)l.push(e.id),r-=e.cantidad_porciones;else{let t=r,a=e.cantidad_porciones-t;o.push(ev.from("pedidos").update({cantidad_porciones:a}).eq("id",e.id));let s={...e};delete s.id,delete s.created_at,o.push(ev.from("pedidos").insert([{...s,cantidad_porciones:t,estado:"cocinando"}])),r=0}}l.length>0&&o.push(ev.from("pedidos").update({estado:"cocinando"}).in("id",l));let d=K.filter(t=>t.pizza_id===e.id);if(d.length>0)for(let e of d){let t=G.find(t=>t.id===e.ingrediente_id);if(t){let a=e.cantidad_requerida*i,s=t.cantidad_disponible-a;o.push(ev.from("ingredientes").update({cantidad_disponible:s}).eq("id",t.id))}}e.cocinando||o.push(ev.from("menu_pizzas").update({cocinando:!0,cocinando_inicio:new Date().toISOString()}).eq("id",e.id)),L(e=>e.map(e=>l.includes(e.id)?{...e,estado:"cocinando"}:e)),await Promise.all(o),tD()},at=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"todas",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=a?e.pedidosPendientes:e.pedidosPendientes.filter(e=>"cocinando"===e.estado);if(0===s.length)return;let n=[...s].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),i=e.porciones_individuales||er.porciones_por_pizza||4,r=0;r="una"===t?i:n.reduce((e,t)=>e+t.cantidad_porciones,0);let l=[];for(let e of n){if(r<=0)break;l.push(e),r-=e.cantidad_porciones}if(l.length>0){if(!confirm("\xbfEntregar?"))return;let t=l.map(e=>e.id);L(e=>e.map(e=>t.includes(e.id)?{...e,estado:"entregado"}:e)),await ev.from("pedidos").update({estado:"entregado"}).in("id",t),0!==e.pedidosPendientes.filter(e=>"cocinando"===e.estado).filter(e=>!t.includes(e.id)).length||a||(await ev.from("menu_pizzas").update({cocinando:!1,cocinando_inicio:null}).eq("id",e.id),H(t=>t.map(t=>t.id===e.id?{...t,cocinando:!1}:t))),tD()}},aa=(0,n.useMemo)(()=>{let e=B.filter(e=>e.activa);return tS.length>0&&!tS.includes("Todas")&&(e=e.filter(e=>tS.includes(e.categoria||"General")||e.cocinando||M.some(t=>t.pizza_id===e.id))),e.map(e=>{let t=M.filter(t=>t.pizza_id===e.id&&"entregado"!==t.estado),a=M.filter(t=>t.pizza_id===e.id&&"entregado"===t.estado),s=t.filter(e=>"pendiente"===e.estado).reduce((e,t)=>e+t.cantidad_porciones,0),n=t.filter(e=>"cocinando"===e.estado).reduce((e,t)=>e+t.cantidad_porciones,0),i=a.reduce((e,t)=>e+t.cantidad_porciones,0),r=e.porciones_individuales||er.porciones_por_pizza;return{...e,totalPendientes:s+n,enEspera:s,enHorno:n,entregadas:i,completas:Math.floor(n/r),faltan:r-n%r,target:r,percent:n%r/r*100,pedidosPendientes:t,stockRestante:e.stock}}).sort((e,t)=>e.cocinando&&!t.cocinando?-1:!e.cocinando&&t.cocinando?1:"nombre"===tv?e.nombre.localeCompare(t.nombre):t.totalPendientes-e.totalPendientes)},[B,M,er,tv,tS]),as=(0,n.useMemo)(()=>{let e=0,t=0,a=0,s=new Set;return M.forEach(n=>{"pendiente"===n.estado?(s.add(n.invitado_nombre.toLowerCase()),e+=n.cantidad_porciones):"cocinando"===n.estado?(s.add(n.invitado_nombre.toLowerCase()),t+=n.cantidad_porciones):"entregado"===n.estado&&(a+=n.cantidad_porciones)}),{waiting:e,cooking:t,delivered:a,hungryPeople:s.size}},[M,B]),an=Array.from(new Set(M.map(e=>e.invitado_nombre.toLowerCase()))).map(e=>{var t;let a=M.filter(t=>t.invitado_nombre.toLowerCase()===e),s=(null===(t=a[0])||void 0===t?void 0:t.invitado_nombre)||e,n=B.map(e=>{let t=a.filter(t=>t.pizza_id===e.id);if(0===t.length)return null;let s=t.filter(e=>"entregado"===e.estado).reduce((e,t)=>e+t.cantidad_porciones,0),n=t.filter(e=>"pendiente"===e.estado),i=n.reduce((e,t)=>e+t.cantidad_porciones,0),r=n.length>0?n.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())[0].created_at:null,l=t.filter(e=>"cocinando"===e.estado).reduce((e,t)=>e+t.cantidad_porciones,0);return{id:e.id,nombre:e.nombre,entregada:s,enHorno:l,enEspera:i,oldestPending:r}}).filter(Boolean),i=n.reduce((e,t)=>e+((null==t?void 0:t.enHorno)||0),0),r=n.reduce((e,t)=>e+((null==t?void 0:t.enEspera)||0),0);return{nombre:s,detalle:n,totalPendienteGeneral:i+r,totalEnHorno:i,totalEnEspera:r}}).sort((e,t)=>t.totalPendienteGeneral-e.totalPendienteGeneral),ai=(0,n.useMemo)(()=>B.map(e=>{let t=es.filter(t=>t.pizza_id===e.id),a=t.length>0?t.reduce((e,t)=>e+t.rating,0)/t.length:0,s=M.filter(t=>t.pizza_id===e.id).reduce((e,t)=>e+t.cantidad_porciones,0);return{...e,avg:parseFloat(a.toFixed(1)),count:t.length,totalOrders:s}}).sort((e,t)=>t.avg-e.avg),[B,es,M]),ar=(0,n.useMemo)(()=>{let e={};M.forEach(t=>{let a=t.invitado_nombre.toLowerCase();e[a]=(e[a]||0)+t.cantidad_porciones});let t=new Map;return ee.forEach(a=>{let s=a.nombre.toLowerCase(),n="web"===a.origen;t.set(s,{...a,totalOrders:e[s]||0,source:n?"ped":"db",origen:a.origen||"admin"})}),Object.keys(e).forEach(a=>{if(!t.has(a)){var s;let n=(null===(s=M.find(e=>e.invitado_nombre.toLowerCase()===a))||void 0===s?void 0:s.invitado_nombre)||a;t.set(a,{id:null,nombre:n,bloqueado:!1,source:"ped",totalOrders:e[a],origen:"web"})}}),Array.from(t.values()).sort((e,t)=>e.nombre.localeCompare(t.nombre))},[ee,M]);return e?(0,s.jsxs)("div",{className:"min-h-screen font-sans pb-28 w-full ".concat(t_.bg),children:[(0,s.jsx)("div",{className:"w-full h-40 rounded-b-[40px] bg-gradient-to-br ".concat(tg.gradient," shadow-xl absolute top-0 left-0 z-0")}),(0,s.jsxs)("div",{className:"fixed top-4 left-4 right-4 z-50 rounded-2xl p-2 flex justify-between items-center shadow-lg backdrop-blur-md border ".concat(t_.bar),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 pl-2 cursor-pointer active:scale-95 transition-transform",onClick:()=>eh(!0),children:[(0,s.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-10 w-auto"}),(0,s.jsxs)("div",{className:"leading-tight",children:[(0,s.jsx)("h1",{className:"font-bold text-sm",children:"Modo Pizzaiolo"}),(0,s.jsxs)("p",{className:"text-[10px] opacity-70 flex items-center gap-1",children:[(0,s.jsx)(o.Z,{size:10,className:"text-green-500 animate-pulse"})," ",ex," / ",er.total_invitados]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 relative pr-1",children:["menu"===T&&(0,s.jsx)("button",{onClick:()=>eV(!0),className:"p-2 rounded-full border ".concat(t_.buttonSec," text-blue-500 border-blue-500/30 bg-blue-500/10"),title:"Edici\xf3n Masiva",children:(0,s.jsx)(d.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>tj(!tf),className:"p-2 rounded-full border ".concat(t_.buttonSec),children:(0,s.jsx)(c.Z,{size:16})}),tf&&(0,s.jsx)("div",{className:"absolute top-12 right-0 bg-black/90 backdrop-blur p-2 rounded-xl flex gap-2 animate-in fade-in z-50 border border-white/10 shadow-xl",children:ey.map(e=>(0,s.jsx)("button",{onClick:()=>tE(e),className:"w-6 h-6 rounded-full ".concat(e.color," border-2 border-white ring-2 ring-transparent hover:scale-110 transition-transform")},e.name))}),(0,s.jsx)("button",{onClick:()=>{tz(!tk),localStorage.setItem("vito-dark-mode",String(!tk))},className:"p-2 rounded-full border ".concat(t_.buttonSec),children:tk?(0,s.jsx)(x.Z,{size:16}):(0,s.jsx)(u.Z,{size:16})}),"cocina"===T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>tw(e=>"estado"===e?"nombre":"estado"),className:"p-2 rounded-full border flex items-center gap-1 ".concat(t_.buttonSec),children:"estado"===tv?(0,s.jsx)(m.Z,{size:16}):(0,s.jsx)(p.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>ty(!tN),className:"p-2 rounded-full border flex items-center gap-1 ".concat(t_.buttonSec),children:tN?(0,s.jsx)(b.Z,{size:16}):(0,s.jsx)(g.Z,{size:16})})]}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("vito-admin-session"),window.location.href="/"},className:"p-2 rounded-full border ".concat(t_.buttonSec," ml-1 bg-red-500/10 border-red-500/30 text-red-500"),children:(0,s.jsx)(h.Z,{size:16})})]})]}),eg&&(0,s.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",onClick:()=>eh(!1),children:(0,s.jsxs)("div",{className:"w-full max-w-sm rounded-3xl p-6 shadow-2xl border ".concat(t_.card," relative"),onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:()=>eh(!1),className:"absolute top-4 right-4 text-gray-500",children:(0,s.jsx)(f.Z,{size:20})}),(0,s.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{size:20,className:"text-green-500"})," En L\xednea (",ex,")"]}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:ep.length>0?ep.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 rounded-xl border ".concat(t_.innerCard," flex items-center gap-2"),children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e})]},t)):(0,s.jsx)("p",{className:"text-sm opacity-50 text-center py-4",children:"Nadie por aqu\xed..."})})]})}),eK&&(0,s.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",onClick:()=>eV(!1),children:(0,s.jsxs)("div",{className:"w-full max-w-lg rounded-3xl p-6 shadow-2xl border ".concat(t_.card," flex flex-col max-h-[90vh]"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,s.jsx)(d.Z,{size:24,className:"text-blue-500"})," Edici\xf3n Masiva"]}),(0,s.jsx)("button",{onClick:()=>eV(!1),children:(0,s.jsx)(f.Z,{size:24,className:"opacity-50 hover:opacity-100"})})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4 bg-neutral-800/50 p-1 rounded-xl border border-white/5",children:[(0,s.jsxs)("button",{onClick:()=>eJ("SET"),className:"flex-1 py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-all ".concat("SET"===eW?"bg-blue-600 text-white shadow":"opacity-60 hover:opacity-100"),children:[(0,s.jsx)(j.Z,{size:16})," Fijar / A\xf1adir"]}),(0,s.jsxs)("button",{onClick:()=>eJ("REMOVE"),className:"flex-1 py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-all ".concat("REMOVE"===eW?"bg-red-600 text-white shadow":"opacity-60 hover:opacity-100"),children:[(0,s.jsx)(v.Z,{size:16})," Eliminar"]})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-4 overflow-y-auto flex-1 pr-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2 ".concat("SET"===eW?"md:col-span-1":""),children:[(0,s.jsxs)("label",{className:"text-xs font-bold uppercase opacity-60 mb-1 block",children:["Ingrediente a ","SET"===eW?"Aplicar":"Borrar"]}),(0,s.jsxs)("select",{value:eQ,onChange:e=>eX(e.target.value),className:"w-full p-3 rounded-xl border outline-none ".concat(t_.input),children:[(0,s.jsx)("option",{value:"",children:"Seleccionar..."}),G.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.nombre," (",e.cantidad_disponible," ",e.unidad,")"]},e.id))]})]}),"SET"===eW&&(0,s.jsxs)("div",{className:"col-span-2 md:col-span-1 animate-in fade-in",children:[(0,s.jsx)("label",{className:"text-xs font-bold uppercase opacity-60 mb-1 block",children:"Cantidad Nueva"}),(0,s.jsx)("input",{type:"number",value:eY,onChange:e=>e$(e.target.value),placeholder:"0",className:"w-full p-3 rounded-xl border outline-none ".concat(t_.input)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-2 border-b border-gray-700 pb-2",children:[(0,s.jsxs)("label",{className:"text-xs font-bold uppercase opacity-60",children:["Seleccionar Pizzas (",e0.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>e1(B.map(e=>e.id)),className:"text-[10px] underline text-blue-400",children:"Todas"}),(0,s.jsx)("button",{onClick:()=>e1([]),className:"text-[10px] underline text-red-400",children:"Ninguna"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:B.map(e=>(0,s.jsxs)("div",{onClick:()=>t6(e.id),className:"p-3 rounded-xl border cursor-pointer flex items-center gap-3 transition-all ".concat(e0.includes(e.id)?"bg-blue-500/20 border-blue-500":t_.innerCard),children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded border flex items-center justify-center ".concat(e0.includes(e.id)?"bg-blue-500 border-blue-500":"border-gray-500"),children:e0.includes(e.id)&&(0,s.jsx)(w.Z,{size:14,className:"text-white"})}),(0,s.jsx)("span",{className:"text-sm font-medium truncate",children:e.nombre})]},e.id))})]})]}),(0,s.jsx)("button",{onClick:t4,className:"w-full py-3 font-bold rounded-xl shadow-lg transition-all active:scale-95 text-white ".concat("SET"===eW?"bg-blue-600 hover:bg-blue-500":"bg-red-600 hover:bg-red-500"),children:"SET"===eW?"APLICAR CAMBIOS":"ELIMINAR SELECCI\xd3N"})]})}),(0,s.jsxs)("div",{className:"relative z-10 pt-24 px-4 pb-36",children:["cocina"===T&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"p-3 rounded-2xl border flex flex-col items-center justify-center ".concat(t_.metric),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1 opacity-60",children:[(0,s.jsx)(N.Z,{size:16}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase",children:"En Horno"})]}),(0,s.jsx)("p",{className:"text-2xl font-black",children:as.cooking})]}),(0,s.jsxs)("div",{className:"p-3 rounded-2xl border flex flex-col items-center justify-center ".concat(t_.metric),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1 opacity-60",children:[(0,s.jsx)(y.Z,{size:16}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase",children:"En Cola"})]}),(0,s.jsx)("p",{className:"text-2xl font-black",children:as.waiting})]}),(0,s.jsxs)("div",{className:"p-3 rounded-2xl border flex flex-col items-center justify-center ".concat(t_.metric),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1 opacity-60",children:[(0,s.jsx)(w.Z,{size:16}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase",children:"Entregado"})]}),(0,s.jsx)("p",{className:"text-2xl font-black",children:as.delivered})]}),(0,s.jsxs)("div",{className:"p-3 rounded-2xl border flex flex-col items-center justify-center ".concat(t_.metric),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1 opacity-60",children:[(0,s.jsx)(o.Z,{size:16}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase",children:"Esperando"})]}),(0,s.jsx)("p",{className:"text-2xl font-black",children:as.hungryPeople})]})]}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto space-y-4 w-full",children:["cocina"===T&&(0,s.jsx)(R,{metricas:aa,base:t_,isCompact:tN,isDarkMode:tk,currentTheme:tg,toggleCocinando:ae,entregar:at}),"pedidos"===T&&(0,s.jsx)(A,{pedidosAgrupados:an,base:t_,isDarkMode:tk,eliminarPedidosGusto:t2,resetAllOrders:tJ,eliminarUnidad:tM}),"ingredientes"===T&&(0,s.jsx)(F,{base:t_,currentTheme:tg,ingredients:G,newIngName:e2,setNewIngName:e5,newIngQty:e3,setNewIngQty:e4,newIngUnit:e6,setNewIngUnit:e9,newIngCat:e8,setNewIngCat:e7,addIng:tQ,editingIngId:te,editIngForm:ta,setEditIngForm:ts,saveEditIng:tX,cancelEditIng:()=>{tt(null)},delIng:tY,startEditIng:e=>{tt(e.id),ts({nombre:e.nombre,cantidad:e.cantidad_disponible,unidad:e.unidad||"g",categoria:e.categoria||"General"})},reservedState:W,quickUpdateStock:t$}),"menu"===T&&(0,s.jsx)(ea,{base:t_,config:er,setConfig:el,activeCategories:tS,uniqueCategories:tZ,toggleCategory:tU,currentTheme:tg,addP:tH,uploading:eD,newPizzaName:ek,setNewPizzaName:ez,isDarkMode:tk,handleImageUpload:tR,newPizzaImg:eS,newPizzaDesc:e_,setNewPizzaDesc:eC,newPizzaIngredients:eL,removeFromNewPizzaRecipe:e=>{eB(t=>t.filter((t,a)=>a!==e))},newPizzaSelectedIng:eH,setNewPizzaSelectedIng:eG,ingredients:G,newPizzaRecipeQty:eF,setNewPizzaRecipeQty:eU,addToNewPizzaRecipe:()=>{if(!eH)return;let[e,t]=eH.split("|"),a=Number(eF);a<=0||(eB(s=>[...s,{ingrediente_id:e,nombre:t,cantidad:a}]),eG(""),eU(1))},newPizzaCat:eI,setNewPizzaCat:eT,newPizzaPortions:eq,setNewPizzaPortions:eO,stockEstimadoNueva:tC,newPizzaTime:eE,setNewPizzaTime:eP,pizzas:B,edits:Y,recetas:K,updateP:tB,savePizzaChanges:t0,cancelChanges:e=>{$(t=>{let a={...t};return delete a[e],a})},delP:tG,duplicateP:tL,tempRecipeIng:tn,setTempRecipeIng:ti,tempRecipeQty:tr,setTempRecipeQty:tl,addToExistingPizza:(e,t,a,s,n)=>{let i=Number(s);i<=0||tO(e,[...n,{ingrediente_id:t,cantidad_requerida:i,nombre:a}])},removeFromExistingPizza:(e,t,a)=>{tO(e,a.filter((e,a)=>a!==t))},reservedState:W,calcularStockDinamico:eN,updateLocalRecipe:tO,newPizzaType:eR,setNewPizzaType:eA}),"ranking"===T&&(0,s.jsx)(ei,{base:t_,delAllVal:t8,ranking:ai,delValPizza:t7}),"usuarios"===T&&(0,s.jsx)(ed,{base:t_,newGuestName:to,setNewGuestName:td,addU:tK,allUsersList:ar,resetU:t5,toggleB:tV,eliminarUsuario:t3,tempMotivos:tp,setTempMotivos:tb,guardarMotivo:tW,currentTheme:tg,resetAllOrders:tJ}),"config"===T&&(0,s.jsx)(eu,{base:t_,config:er,setConfig:el,isDarkMode:tk,resetAllOrders:tJ,newPass:tc,setNewPass:tx,confirmPass:tu,setConfirmPass:tm,changePass:tF,currentTheme:tg,sessionDuration:O,setSessionDuration:D}),"logs"===T&&(0,s.jsx)(ej,{base:t_,logs:Q,isDarkMode:tk,currentTheme:tg,updateLogName:t9,onRefresh:tI})]})]}),(0,s.jsxs)("div",{className:"fixed bottom-4 left-4 right-4 z-50 rounded-full p-3 flex justify-around items-center ".concat(t_.bar),children:[(0,s.jsxs)("button",{onClick:()=>q("cocina"),className:"flex flex-col items-center gap-1 ".concat("cocina"===T?tg.text:t_.subtext),children:[(0,s.jsx)(k.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Cocina"})]}),(0,s.jsxs)("button",{onClick:()=>q("pedidos"),className:"flex flex-col items-center gap-1 ".concat("pedidos"===T?tg.text:t_.subtext),children:[(0,s.jsx)(z.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Pedidos"})]}),(0,s.jsxs)("button",{onClick:()=>q("menu"),className:"flex flex-col items-center gap-1 ".concat("menu"===T?tg.text:t_.subtext),children:[(0,s.jsx)(_.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Men\xfa"})]}),(0,s.jsxs)("button",{onClick:()=>q("ranking"),className:"flex flex-col items-center gap-1 ".concat("ranking"===T?tg.text:t_.subtext),children:[(0,s.jsx)(C.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Rank"})]}),(0,s.jsxs)("button",{onClick:()=>q("usuarios"),className:"flex flex-col items-center gap-1 ".concat("usuarios"===T?tg.text:t_.subtext),children:[(0,s.jsx)(o.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Usuarios"})]}),(0,s.jsxs)("button",{onClick:()=>q("ingredientes"),className:"flex flex-col items-center gap-1 ".concat("ingredientes"===T?tg.text:t_.subtext),children:[(0,s.jsx)(S.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Invent."})]}),(0,s.jsxs)("button",{onClick:()=>q("logs"),className:"flex flex-col items-center gap-1 ".concat("logs"===T?tg.text:t_.subtext),children:[(0,s.jsx)(Z.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Logs"})]}),(0,s.jsxs)("button",{onClick:()=>q("config"),className:"flex flex-col items-center gap-1 ".concat("config"===T?tg.text:t_.subtext),children:[(0,s.jsx)(E.Z,{size:20}),(0,s.jsx)("span",{className:"text-[8px] uppercase font-bold",children:"Ajustes"})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 pb-40 ".concat(t_.bg),children:(0,s.jsxs)("div",{className:"w-full max-w-md p-8 rounded-3xl border shadow-xl ".concat(t_.card),children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-48 w-auto object-contain drop-shadow-xl"})}),(0,s.jsxs)("form",{onSubmit:tP,className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:P?"text":"password",value:a,onChange:e=>i(e.target.value),className:"w-full p-4 rounded-xl border outline-none ".concat(t_.input),placeholder:"Contrase\xf1a...",autoFocus:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>I(!P),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:P?(0,s.jsx)(r.Z,{size:24}):(0,s.jsx)(l.Z,{size:24})})]}),(0,s.jsx)("button",{type:"submit",className:"w-full ".concat(tg.color," text-white font-bold py-4 rounded-xl hover:opacity-90 transition"),children:"ENTRAR"})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-white/10",children:(0,s.jsxs)("button",{onClick:()=>window.location.href="/",className:"w-full py-3 rounded-xl border flex items-center justify-center gap-2 font-bold ".concat(t_.buttonSec),children:[(0,s.jsx)(o.Z,{size:20})," MODO INVITADOS"]})})]})})}}},function(e){e.O(0,[491,878,971,117,744],function(){return e(e.s=1519)}),_N_E=e.O()}]);